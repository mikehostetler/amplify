/*
	amplify - AmplifyJS is a set of components for data management and application communication.
	version:	1.1.0
	author:		appendTo (http://appendto.com/)
	copyright:	2011 - 2012
	license:	Dual licensed (http://appendto.com/open-source-licenses)
				MIT (http://www.opensource.org/licenses/mit-license)
				GPL (http://www.opensource.org/licenses/gpl-license)
	website:    http://amplifyjs.com
*/
(function(e,t){var n=[].slice,r={},i=e.amplify={publish:function(e){if(typeof e!="string")throw new Error("You must provide a valid topic to publish.");var t=n.call(arguments,1),i,s,o,u=0,a;if(!r[e])return!0;i=r[e].slice();for(o=i.length;u<o;u++){s=i[u],a=s.callback.apply(s.context,t);if(a===!1)break}return a!==!1},subscribe:function(e,t,n,i){if(typeof e!="string")throw new Error("You must provide a valid topic to create a subscription.");arguments.length===3&&typeof n=="number"&&(i=n,n=t,t=null),arguments.length===2&&(n=t,t=null),i=i||10;var s=0,o=e.split(/\s/),u=o.length,a;for(;s<u;s++){e=o[s],a=!1,r[e]||(r[e]=[]);var f=r[e].length-1,l={callback:n,context:t,priority:i};for(;f>=0;f--)if(r[e][f].priority<=i){r[e].splice(f+1,0,l),a=!0;break}a||r[e].unshift(l)}return n},unsubscribe:function(e,t){if(typeof e!="string")throw new Error("You must provide a valid topic to remove a subscription.");if(!r[e])return;var n=r[e].length,i=0;for(;i<n;i++)if(r[e][i].callback===t){r[e].splice(i,1);break}}}})(this)